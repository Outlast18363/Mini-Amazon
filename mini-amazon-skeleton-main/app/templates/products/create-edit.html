{% extends "base.html" %}

{% block content %}

<h1>{{ "Edit Product" if product else "Create Product" }}</h1>

{% if current_user.is_authenticated %}

<form method="POST" class="container" style="max-width: 600px;">
  <div class="form-group">
    <label for="name">Product Name:</label>
    <input type="text" class="form-control" id="name" name="name"
           value="{{ product.name if product else '' }}" required>
  </div>

  <div class="form-group">
    <label for="description">Description:</label>
    <textarea class="form-control" id="description" name="description" rows="4"
              required>{{ product.description if product else '' }}</textarea>
  </div>

  <div class="form-group">
    <label for="image_url">Image URL (optional):</label>
    <input type="text" class="form-control" id="image_url" name="image_url"
           value="{{ product.image_url if product else '' }}">
  </div>

  <div class="form-group">
    <label for="category">Category (optional):</label>
    <select name="category" id="category" class="form-control">
      <option value="">None</option>
      {% for cat in categories %}
        <option value="{{ cat.id }}"
          {% if product and product.category_id == cat.id %}selected{% endif %}>
          {{ cat.name }}
        </option>
      {% endfor %}
    </select>
  </div>

  <button type="submit" class="btn btn-black">
    {{ "Update Product" if product else "Create Product" }}
  </button>
</form>

{% else %}
<p><a href="{{ url_for('users.login') }}">Log in</a> to create or edit products!</p>
{% endif %}

{% endblock %}
